<!doctype html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Linux Store - Painel Financeiro</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
    />

    <style>
      /* RESET E CORES BASE */
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
      }

      body {
        background-color: #0d1117; /* Fundo mais escuro da foto 2 */
        color: #ffffff;
        padding: 40px 20px;
      }

      /* TÍTULO PRINCIPAL */
      h1 {
        text-align: center;
        font-size: 24px;
        margin-bottom: 40px;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 15px;
      }

      h1 span {
        color: #2ecc71; /* Verde Linux Store */
      }

      /* GRID DE CARDS SUPERIORES */
      .cards {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 20px;
        margin-bottom: 40px;
        max-width: 1200px;
        margin-left: auto;
        margin-right: auto;
      }

      .card {
        background: #161b22;
        padding: 20px;
        border-radius: 12px;
        border: 1px solid #30363d;
        transition: transform 0.2s;
      }

      .card h3 {
        font-size: 14px;
        color: #8b949e;
        display: flex;
        align-items: center;
        gap: 8px;
        margin-bottom: 10px;
      }

      .card p {
        font-size: 24px;
        font-weight: bold;
        color: #2ecc71; /* Números em verde na foto 2 */
      }

      /* SEÇÃO DE FORMULÁRIOS LADO A LADO */
      .forms-container {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 20px;
        max-width: 1200px;
        margin: 0 auto 40px auto;
      }

      .form-box {
        background: #161b22;
        padding: 25px;
        border-radius: 12px;
        border: 1px solid #30363d;
      }

      .form-box h2 {
        font-size: 16px;
        margin-bottom: 20px;
        display: flex;
        align-items: center;
        gap: 10px;
        color: #f0f6fc;
      }

      .form-box h2 i {
        color: #2ecc71;
      }

      /* INPUTS E BOTÕES ESTILO FOTO 2 */
      input {
        width: 100%;
        padding: 12px;
        background: #0d1117;
        border: 1px solid #30363d;
        border-radius: 8px;
        color: white;
        margin-bottom: 15px;
        outline: none;
      }

      input:focus {
        border-color: #2ecc71;
      }

      button {
        width: 100%;
        padding: 12px;
        border-radius: 8px;
        border: none;
        cursor: pointer;
        font-weight: bold;
        transition: opacity 0.2s;
      }

      .btn-main {
        background: #2ecc71;
        color: #0d1117;
      }

      .btn-main:hover {
        opacity: 0.9;
      }

      /* TABELA ESTILO MODERNO */
      .table-container {
        max-width: 1200px;
        margin: 0 auto;
        background: #161b22;
        border-radius: 12px;
        border: 1px solid #30363d;
        overflow: hidden;
      }

      .tabela {
        width: 100%;
        border-collapse: collapse;
      }

      .tabela th {
        text-align: left;
        padding: 15px;
        background: #1f242c;
        color: #8b949e;
        font-size: 14px;
      }

      .tabela td {
        padding: 15px;
        border-top: 1px solid #30363d;
        font-size: 14px;
        color: #c9d1d9;
      }

      .empty-msg {
        text-align: center;
        padding: 40px;
        color: #8b949e;
      }

      /* STATUS E AÇÕES */
      .status-pago {
        color: #2ecc71;
        font-weight: bold;
      }
      .status-receber {
        color: #e74c3c;
        font-weight: bold;
      }

      .actions {
        display: flex;
        gap: 8px;
      }

      .btn-action {
        padding: 6px 10px;
        border-radius: 6px;
        font-size: 12px;
        color: white;
      }

      .btn-ok {
        background: #238636;
      }
      .btn-edit {
        background: #1f6feb;
      }
      .btn-del {
        background: #da3633;
      }

      /* RESPONSIVIDADE */
      @media (max-width: 768px) {
        .forms-container {
          grid-template-columns: 1fr;
        }
      }
    </style>
  </head>
  <body>
    <div style="position: fixed; top: 10px; right: 20px; z-index: 1000">
      <a
        href="/logout"
        style="
          background: #161b22;
          color: #8b949e;
          padding: 10px 15px;
          border: 1px solid #30363d;
          border-radius: 8px;
          text-decoration: none;
          font-weight: bold;
          display: flex;
          align-items: center;
          gap: 8px;
          transition: 0.3s;
        "
      >
        <i class="fa-solid fa-right-from-bracket"></i> Sair
      </a>
    </div>
    <h1>
      <i class="fa-solid fa-desktop"></i> Painel Financeiro –
      <span>Linux Store</span>
    </h1>

    <div class="cards">
      <div class="card">
        <h3><i class="fa-solid fa-users"></i> Total de clientes</h3>
        <p id="cTotalClientes">0</p>
      </div>
      <div class="card">
        <h3><i class="fa-solid fa-arrow-trend-up"></i> Total recebido</h3>
        <p id="cRecebido">R$ 0,00</p>
      </div>
      <div class="card">
        <h3><i class="fa-solid fa-dollar-sign"></i> Total a receber</h3>
        <p id="cReceber">R$ 0,00</p>
      </div>
      <div class="card">
        <h3><i class="fa-solid fa-chart-line"></i> Custo total dos ativos</h3>
        <p id="cCusto">R$ 0,00</p>
      </div>
      <div class="card">
        <h3><i class="fa-solid fa-chart-pie"></i> Lucro / Prejuízo</h3>
        <p id="cLucro">R$ 0,00</p>
      </div>
    </div>

    <div class="forms-container">
      <div class="form-box">
        <h2>
          <i class="fa-solid fa-gear"></i> Valor do ativo (custo por cliente)
        </h2>
        <input type="number" id="valorAtivo" placeholder="Ex: 10" />
        <button class="btn-main" onclick="salvarValorAtivo()">
          Salvar valor do ativo
        </button>
      </div>

      <div class="form-box">
        <h2><i class="fa-solid fa-user-plus"></i> Novo Cliente</h2>
        <input id="nomeCliente" placeholder="Nome" />
        <input id="usuarioCliente" placeholder="Usuário" />
        <input id="valorCliente" type="number" placeholder="Valor do cliente" />
        <button class="btn-main" onclick="adicionarCliente()">
          Adicionar cliente
        </button>
      </div>
    </div>

    <div class="table-container">
      <table class="tabela">
        <thead>
          <tr>
            <th>Nome</th>
            <th>Usuário</th>
            <th>Valor (R$)</th>
            <th>Status</th>
            <th>Ações</th>
          </tr>
        </thead>
        <tbody id="clientesLista">
          <tr>
            <td colspan="5" class="empty-msg">Nenhum cliente cadastrado</td>
          </tr>
        </tbody>
      </table>
    </div>

    <script>
      // Mantive o script original aqui, refatorei apenas para melhor organização e clareza, sem alterar a lógica principal.
      let clientes = JSON.parse(localStorage.getItem('clientes_linux_store')) || [];
// Chame o renderizar logo abaixo para carregar o que estiver salvo
renderizar();
      let valorAtivo = 0;

      function salvarValorAtivo() {
        const v = Number(document.getElementById("valorAtivo").value);
        if (v < 0) {
          alert("Valor inválido");
          return;
        }
        valorAtivo = v;
        renderizar();
      }

      function adicionarCliente() {
        const nome = document.getElementById("nomeCliente").value.trim();
        const usuario = document.getElementById("usuarioCliente").value.trim();
        const valor = Number(document.getElementById("valorCliente").value);

        if (!nome || !usuario || valor <= 0) {
          alert("Preencha todos os campos corretamente");
          return;
        }

        clientes.push({ nome, usuario, valor, pago: false });
        document.getElementById("nomeCliente").value = "";
        document.getElementById("usuarioCliente").value = "";
        document.getElementById("valorCliente").value = "";
        renderizar();
      }

      function alternarPago(index) {
        clientes[index].pago = !clientes[index].pago;
        renderizar();
      }

      function editarValor(index) {
        const novo = prompt("Novo valor do cliente:", clientes[index].valor);
        if (novo === null) return;
        const v = Number(novo);
        if (v <= 0) {
          alert("Valor inválido");
          return;
        }
        clientes[index].valor = v;
        renderizar();
      }

      function removerCliente(index) {
        if (confirm("Excluir este cliente?")) {
          clientes.splice(index, 1);
          renderizar();
        }
      }
      localStorage.setItem("clientes_linux_store", JSON.stringify(clientes));
      function renderizar() {
        const lista = document.getElementById("clientesLista");
        lista.innerHTML = "";

        if (clientes.length === 0) {
          lista.innerHTML =
            '<tr><td colspan="5" class="empty-msg">Nenhum cliente cadastrado</td></tr>';
        }

        let recebido = 0;
        let receber = 0;

        clientes.forEach((c, i) => {
          if (c.pago) recebido += c.valor;
          else receber += c.valor;

          const tr = document.createElement("tr");
          tr.innerHTML = `
                    <td>${c.nome}</td>
                    <td>${c.usuario}</td>
                    <td>R$ ${c.valor.toFixed(2)}</td>
                    <td class="${c.pago ? "status-pago" : "status-receber"}">
                        ${c.pago ? "Pago" : "A pagar"}
                    </td>
                    <td>
                        <div class="actions">
                            <button class="btn btn-action btn-ok" onclick="alternarPago(${i})"><i class="fa-solid fa-check"></i></button>
                            <button class="btn btn-action btn-edit" onclick="editarValor(${i})"><i class="fa-solid fa-pen"></i></button>
                            <button class="btn btn-action btn-del" onclick="removerCliente(${i})"><i class="fa-solid fa-trash"></i></button>
                        </div>
                    </td>
                `;
          lista.appendChild(tr);
        });

        const custo = valorAtivo * clientes.length;
        const lucro = recebido - custo;

        document.getElementById("cTotalClientes").innerText = clientes.length;
        document.getElementById("cRecebido").innerText =
          "R$ " + recebido.toFixed(2);
        document.getElementById("cReceber").innerText =
          "R$ " + receber.toFixed(2);
        document.getElementById("cCusto").innerText = "R$ " + custo.toFixed(2);
        document.getElementById("cLucro").innerText = "R$ " + lucro.toFixed(2);

        // Cor do lucro/prejuízo
        document.getElementById("cLucro").style.color =
          lucro >= 0 ? "#2ecc71" : "#e74c3c";
      }
    </script>
  </body>
</html>
